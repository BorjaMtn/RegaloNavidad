<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calendario de Adviento üéÑ‚ú®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg1: #080317;
      --bg2: #140b2b;
      --accent: #ff6b9d;
      --accent2: #ec4899;
      --accent3: #a855f7;
      --card: rgba(10, 7, 24, 0.96);
      --text: #faf9ff;
      --muted: #d4d0e8;
      --locked: #6b7280;
      --gold: #ffd97d;
      --rose: #ff89b5;
      --heart: #fb7185;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      background: radial-gradient(ellipse at top, var(--bg2) 0%, var(--bg1) 55%, #030010 100%);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    /* Estrellas suaves */
    .stars {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.4;
      animation: sparkle 3s ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0.2; transform: scale(1) translate3d(0,0,0); }
      50% { opacity: 0.9; transform: scale(1.25) translate3d(0,-4px,0); }
    }

    /* Nieve */
    .snowflake {
      position: fixed;
      top: -10px;
      color: rgba(255, 255, 255, 0.9);
      font-size: 1em;
      opacity: 0.8;
      pointer-events: none;
      z-index: 2;
      animation: fall linear infinite;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
      will-change: transform;
    }

    @keyframes fall {
      to { transform: translate3d(0, 110vh, 0) rotate(360deg); }
    }

    /* Part√≠culas de luz */
    .light-particle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: radial-gradient(circle, var(--rose) 0%, transparent 70%);
      border-radius: 50%;
      pointer-events: none;
      z-index: 2;
      animation: float 8s ease-in-out infinite;
      opacity: 0.7;
      will-change: transform;
    }

    @keyframes float {
      0%, 100% { transform: translate3d(0,0,0); }
      25% { transform: translate3d(20px,-30px,0); }
      50% { transform: translate3d(-20px,-60px,0); }
      75% { transform: translate3d(30px,-30px,0); }
    }

    .container {
      position: relative;
      z-index: 10;
      max-width: 1100px;
      width: 100%;
    }

    .card {
      background: var(--card);
      border-radius: 32px;
      padding: 32px 24px 40px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      box-shadow:
        0 26px 50px rgba(0, 0, 0, 0.75),
        0 0 80px rgba(251, 113, 133, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      position: relative;
      overflow: hidden;
      animation: cardGlow 4s ease-in-out infinite, fadeInUp 0.8s ease-out;
    }

    @keyframes cardGlow {
      0%, 100% {
        box-shadow:
          0 26px 50px rgba(0, 0, 0, 0.75),
          0 0 70px rgba(251, 113, 133, 0.16),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
      }
      50% {
        box-shadow:
          0 28px 60px rgba(0, 0, 0, 0.85),
          0 0 100px rgba(251, 113, 133, 0.28),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
      }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translate3d(0, 30px, 0); }
      to { opacity: 1; transform: translate3d(0, 0, 0); }
    }

    @media (min-width: 768px) {
      .card { padding: 40px 36px 44px; }
    }

    /* Guirnalda de luces */
    .lights {
      position: absolute;
      top: -6px;
      left: 0;
      right: 0;
      height: 52px;
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      padding: 0 26px;
      pointer-events: none;
      z-index: 5;
    }

    .light-wire {
      position: absolute;
      top: 10px;
      left: 12px;
      right: 12px;
      height: 2px;
      background: radial-gradient(circle at center, rgba(248, 250, 252, 0.45), transparent 60%);
      opacity: 0.6;
    }

    .light-bulb {
      width: 15px;
      height: 22px;
      border-radius: 50% 50% 45% 45%;
      background: #ff6b9d;
      box-shadow:
        0 0 16px rgba(255, 107, 157, 0.7),
        0 0 32px rgba(255, 107, 157, 0.25),
        inset 0 -4px 8px rgba(0, 0, 0, 0.35);
      transform-origin: top center;
      animation: swing 3.2s ease-in-out infinite;
      position: relative;
    }

    .light-bulb::before {
      content: '';
      position: absolute;
      top: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 7px;
      height: 4px;
      background: #262626;
      border-radius: 2px;
    }

    .light-bulb:nth-child(2n) {
      background: #5eead4;
      box-shadow: 0 0 16px rgba(94, 234, 212, 0.8), 0 0 32px rgba(94, 234, 212, 0.35), inset 0 -4px 8px rgba(0, 0, 0, 0.35);
      animation-duration: 3.6s;
      animation-delay: -0.5s;
    }

    .light-bulb:nth-child(3n) {
      background: #fbbf24;
      box-shadow: 0 0 16px rgba(251, 191, 36, 0.85), 0 0 32px rgba(251, 191, 36, 0.35), inset 0 -4px 8px rgba(0, 0, 0, 0.35);
      animation-duration: 2.7s;
      animation-delay: -1.1s;
    }

    .light-bulb:nth-child(4n) {
      background: #c084fc;
      box-shadow: 0 0 16px rgba(192, 132, 252, 0.85), 0 0 32px rgba(192, 132, 252, 0.35), inset 0 -4px 8px rgba(0, 0, 0, 0.35);
      animation-duration: 3.3s;
      animation-delay: -1.6s;
    }

    @keyframes swing {
      0%, 100% { transform: rotate(-6deg); }
      50% { transform: rotate(6deg); }
    }

    .top-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .top-tag {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid rgba(251, 191, 36, 0.55);
      background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(236, 72, 153, 0.18) 100%);
      font-size: 0.9rem;
      color: #fef3c7;
      font-weight: 600;
      box-shadow: 0 4px 14px rgba(251, 191, 36, 0.25);
    }

    .top-tag span {
      font-size: 1.2rem;
      animation: pulse 2.4s ease-in-out infinite;
      transform-origin: center;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.12); }
    }

    .music-toggle {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 7px 14px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: radial-gradient(circle at top, rgba(148, 163, 184, 0.18), rgba(15, 23, 42, 0.85));
      font-size: 0.8rem;
      color: var(--muted);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.65);
    }

    .music-toggle:hover {
      transform: translateY(-1px);
      border-color: rgba(236, 72, 153, 0.7);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.8);
    }

    .music-toggle.active {
      border-color: rgba(251, 191, 36, 0.9);
      color: #fde68a;
      background: radial-gradient(circle at top, rgba(251, 191, 36, 0.22), rgba(15, 23, 42, 0.9));
    }

    .music-toggle-icon {
      font-size: 1rem;
    }

    .title {
      font-size: clamp(2rem, 4vw, 2.6rem);
      line-height: 1.15;
      font-weight: 800;
      margin-bottom: 12px;
      background: linear-gradient(135deg, #fef3c7 0%, #fca5a5 22%, #fb7185 42%, #c084fc 68%, #fbbf24 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: gradientShift 9s ease infinite;
      letter-spacing: -0.02em;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .subtitle {
      font-size: 1.02rem;
      color: var(--muted);
      max-width: 640px;
      line-height: 1.7;
      margin-bottom: 12px;
    }

    .subtitle-2 {
      font-size: 0.95rem;
      color: #e5e7eb;
      margin-bottom: 16px;
      line-height: 1.6;
      opacity: 0.92;
    }

    .warning {
      font-size: 0.88rem;
      color: #fecaca;
      padding: 12px 16px;
      background: rgba(248, 113, 113, 0.12);
      border-radius: 14px;
      border: 1px solid rgba(248, 113, 113, 0.4);
      margin-bottom: 20px;
      display: inline-flex;
      align-items: flex-start;
      gap: 8px;
    }

    .warning span {
      margin-top: 1px;
    }

    .divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(248, 113, 113, 0.45), rgba(192, 132, 252, 0.4), transparent);
      margin: 22px 0 20px;
      opacity: 0.85;
    }

    /* Progreso general */
    .progress-wrapper {
      margin-bottom: 18px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .progress-label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      font-size: 0.86rem;
      color: var(--muted);
    }

    .progress-label-row strong {
      color: #e5e7eb;
    }

    .progress-bar {
      position: relative;
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: white;
      overflow: hidden;
    }

    .progress-fill {
  height: 100%;
  background: linear-gradient(90deg,rgba(191, 15, 15, 1) 0%, rgba(219, 77, 79, 1) 100%);
  background-size: 200% 200%;
  animation: progressGlow 12s ease infinite;
  transform-origin: left center;
  transform: scaleX(0);
  will-change: transform;
  border-radius: inherit;
  transition: transform 0.45s ease-out;

}


    @keyframes progressGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .progress-heart {
      font-size: 1rem;
      animation: heartBeat 1.8s ease-in-out infinite;
      transform-origin: center;
    }

    @keyframes heartBeat {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.18); }
      50% { transform: scale(1); }
      75% { transform: scale(1.12); }
    }

    .layout {
      display: grid;
      gap: 20px;
    }

    @media (min-width: 900px) {
      .layout {
        grid-template-columns: minmax(0, 1.45fr) minmax(0, 1fr);
        gap: 26px;
      }
    }

    .calendar-card,
    .clue-card {
      background: radial-gradient(circle at top left, rgba(251, 113, 133, 0.12), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(129, 140, 248, 0.14), transparent 55%),
                  linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(15, 15, 35, 0.97) 100%);
      border-radius: 20px;
      padding: 22px 20px 24px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.04),
        0 10px 26px rgba(0, 0, 0, 0.38);
      position: relative;
      overflow: hidden;
    }

    .calendar-title,
    .clue-title {
      font-size: 0.94rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--rose);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
    }

    .calendar-title::before,
    .clue-title::before {
      content: '';
      width: 4px;
      height: 16px;
      background: linear-gradient(180deg, var(--rose), var(--accent));
      border-radius: 100px;
    }

    .calendar-title span,
    .clue-title span {
      font-size: 1.12rem;
    }

    .calendar-sub {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 16px;
      opacity: 0.92;
    }

    .days-grid {
      display: grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 600px) {
      .days-grid {
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 8px;
      }
    }

    @media (max-width: 400px) {
      .days-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    .day {
      aspect-ratio: 1 / 1;
      border-radius: 16px;
      border: 2px solid rgba(148, 163, 184, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      cursor: pointer;
      font-size: 1.05rem;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at top, rgba(248, 250, 252, 0.08), rgba(15, 23, 42, 0.96));
      color: #e5e7eb;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
      transition:
        transform 0.28s cubic-bezier(0.34, 1.56, 0.64, 1),
        box-shadow 0.28s ease,
        border-color 0.28s ease,
        background 0.28s ease;
    }

    .day span {
      position: relative;
      z-index: 2;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
    }

    .day::before {
      content: "";
      position: absolute;
      inset: 0;
      opacity: 0;
      background: linear-gradient(135deg, rgba(248, 113, 113, 0.75), rgba(236, 72, 153, 0.8), rgba(168, 85, 247, 0.7));
      transition: opacity 0.3s ease;
      z-index: 1;
    }

    .day.unlocked:hover {
      transform: translateY(-4px) scale(1.04);
      box-shadow: 0 12px 28px rgba(236, 72, 153, 0.6);
      border-color: rgba(236, 72, 153, 0.85);
    }

    .day.unlocked:hover::before {
      opacity: 0.85;
    }

    .day.unlocked:active {
      transform: translateY(-2px) scale(1.02);
    }

    .day.locked {
      cursor: default;
      background: radial-gradient(circle at bottom, rgba(15, 23, 42, 1), rgba(24, 24, 42, 0.98));
      color: var(--locked);
      border-style: dashed;
      border-color: rgba(75, 85, 99, 0.7);
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6);
    }

    .day.locked span { opacity: 0.55; }

    .day.locked::after {
      content: "üîí";
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      opacity: 0.75;
      z-index: 3;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.6));
    }

    .day.locked:hover::after {
      content: "Pronto üéÅ";
      font-size: 0.78rem;
    }

    .day.opened {
      border-color: rgba(251, 191, 36, 0.95);
      color: var(--gold);
      box-shadow:
        0 0 0 2px rgba(251, 191, 36, 0.35),
        0 4px 16px rgba(251, 191, 36, 0.55);
      background: radial-gradient(circle at top, rgba(251, 191, 36, 0.16), rgba(236, 72, 153, 0.1));
      animation: openPulse 0.5s ease-out;
    }

    @keyframes openPulse {
      0% { transform: scale(0.95); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    .day.opened::before { opacity: 0.65; }

    .day.opened::after {
      content: "‚ú®";
      position: absolute;
      top: 4px;
      right: 4px;
      font-size: 0.88rem;
      z-index: 3;
      animation: sparkleRotate 2.8s linear infinite;
    }

    @keyframes sparkleRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .clue-inner {
      min-height: 210px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      gap: 14px;
    }

    .clue-meta {
      font-size: 0.84rem;
      color: var(--muted);
      margin-bottom: 8px;
      padding: 8px 12px;
      background: rgba(255, 107, 157, 0.08);
      border-radius: 10px;
      border: 1px solid rgba(255, 107, 157, 0.35);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .clue-meta span {
      color: var(--gold);
      font-weight: 700;
    }

    .clue-text {
      font-size: 1rem;
      line-height: 1.8;
      color: #f0eef5;
      white-space: pre-line;
      opacity: 0;
      transform: translate3d(0, 10px, 0);
      transition:
        opacity 0.5s cubic-bezier(0.34, 1.56, 0.64, 1),
        transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      padding: 16px 14px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border-left: 3px solid rgba(255, 107, 157, 0.6);
    }

    .clue-text.visible {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }

    .clue-placeholder {
      font-size: 0.98rem;
      color: var(--muted);
      line-height: 1.7;
      text-align: center;
      padding: 24px 16px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border: 1px dashed rgba(148, 163, 184, 0.3);
    }

    .clue-footer {
      margin-top: 10px;
      padding: 12px 14px;
      font-size: 0.88rem;
      color: #e0def4;
      font-style: italic;
      background: linear-gradient(135deg, rgba(192, 132, 252, 0.09), rgba(255, 107, 157, 0.1));
      border-radius: 10px;
      border: 1px solid rgba(192, 132, 252, 0.25);
      line-height: 1.6;
      display: flex;
      align-items: flex-start;
      gap: 8px;
    }

    .hint-emoji {
      font-size: 1.15rem;
      margin-top: -1px;
    }

    .end-message {
      margin-top: 10px;
      padding: 10px 12px;
      font-size: 0.9rem;
      border-radius: 10px;
      background: radial-gradient(circle at top, rgba(251, 191, 36, 0.16), rgba(15, 23, 42, 0.96));
      border: 1px solid rgba(251, 191, 36, 0.7);
      color: #fef3c7;
      display: none;
      align-items: center;
      gap: 8px;
    }

    .end-message.visible {
      display: flex;
      animation: fadeInUp 0.6s ease-out;
    }

    .end-heart {
      font-size: 1.2rem;
      animation: heartBeat 1.7s ease-in-out infinite;
    }

    /* Confeti al abrir */
    .confetti {
      position: fixed;
      width: 9px;
      height: 9px;
      pointer-events: none;
      z-index: 9999;
      animation: confettiFall 3s ease-out forwards;
      will-change: transform, opacity;
    }

    @keyframes confettiFall {
      to {
        transform: translate3d(0, 100vh, 0) rotate(720deg);
        opacity: 0;
      }
    }

    /* Scroll suave en m√≥vil */
    @media (max-width: 900px) {
      .clue-card {
        position: sticky;
        top: 18px;
      }
    }

    @media (max-width: 480px) {
      .card { padding: 26px 16px 32px; }
      .calendar-card,
      .clue-card { padding: 18px 14px 20px; }
      .subtitle { font-size: 0.95rem; }
      .subtitle-2 { font-size: 0.9rem; }
    }
  
  /* Tocadiscos m√°gico rosa-dorado */
  .record-player {
    display: none !important;

    margin-top: 16px;
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 14px 18px;
    border-radius: 20px;
    border: 1px solid rgba(255, 107, 157, 0.35);
    background: radial-gradient(circle at top left, rgba(255, 107, 157, 0.12), transparent 60%),
                radial-gradient(circle at bottom right, rgba(192, 132, 252, 0.12), transparent 60%),
                rgba(15, 15, 35, 0.7);
    box-shadow: 0 0 22px rgba(255, 107, 157, 0.15), inset 0 0 12px rgba(255, 255, 255, 0.04);
  }

  .record-container {
    width: 70px;
    height: 70px;
    position: relative;
  }

  .record {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: conic-gradient(
      from 0deg,
      #ff99cc 0%,
      #fbbf24 25%,
      #e879f9 50%,
      #fb7185 75%,
      #ff99cc 100%
    );
    box-shadow: 0 0 18px rgba(255, 107, 157, 0.5), inset 0 0 12px rgba(0, 0, 0, 0.4);
    animation: spinRecord 6s linear infinite;
  }

  @keyframes spinRecord {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .needle {
    position: absolute;
    width: 32px;
    height: 6px;
    background: linear-gradient(90deg, #fcd34d, #fbbf24);
    top: 28px;
    right: -20px;
    border-radius: 4px;
    transform-origin: left center;
    transform: rotate(12deg);
    box-shadow: 0 0 8px rgba(251, 191, 36, 0.6);
  }

  .record-controls {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: 12px;
  }

  .record-title {
    font-size: 0.9rem;
    color: #ffbde1;
    font-weight: 600;
    margin-right: 10px;
  }

  .record-btn {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 10px;
    font-size: 1rem;
    border: 1px solid rgba(255, 107, 157, 0.4);
    padding: 4px 10px;
    cursor: pointer;
    transition: 0.2s;
    color: #ffd6ef;
  }

  .record-btn:hover {
    background: rgba(255, 107, 157, 0.2);
    transform: translateY(-2px);
  }

.final-button {
      margin-top: 20px;
      padding: 14px 22px;
      border: none;
      border-radius: 999px;
      font-weight: 700;
      text-transform: uppercase;
      cursor: pointer;
      background: linear-gradient(135deg, #f97373, #ec4899, #a855f7);
      background-size: 200% 200%;
      color: white;
      font-size: 0.95rem;
      box-shadow:
        0 8px 24px rgba(236, 72, 153, 0.4),
        0 0 40px rgba(236, 72, 153, 0.2);
      animation: ctaGlow 3s ease-in-out infinite;
      transition: all 0.3s ease;
      display: block;
      width: 100%;
      text-align: center;
    }

    .final-button:hover {
      transform: translateY(-3px) scale(1.02);
    }

    </style>
</head>
<body>
  <!-- Estrellas -->
  <div class="stars" id="stars" aria-hidden="true"></div>

  <!-- Nieve -->
  <div id="snowContainer" aria-hidden="true"></div>

  <!-- Part√≠culas de luz -->
  <div id="lightParticles" aria-hidden="true"></div>

  <div class="container" role="main">
    <div class="card" aria-label="Calendario de adviento rom√°ntico">
      <!-- Guirnalda de luces -->
      <div class="lights" aria-hidden="true">
        <div class="light-wire"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
        <div class="light-bulb"></div>
      </div>

      <div class="top-row">
        <div class="top-tag">
          <span>üéÑ</span>
          <span>Calendario de adviento m√°gico</span>
        </div>
        <button class="music-toggle" type="button" id="musicToggle" aria-pressed="false">
          <span class="music-toggle-icon">üéµ</span>
          <span id="musicLabel">Activar m√∫sica suave</span>
        </button>
      </div>

      <!-- Audio (pon tu archivo en la misma carpeta y cambia "music.mp3") -->
      <audio id="bgMusic" loop preload="auto">
        <source src="musica/music.mp3" type="audio/mpeg" />
      </audio>

      <!-- Tocadiscos navide√±o -->
      <div class="record-player" id="recordPlayer">
        <div class="record-container">
          <div class="record" id="recordDisc"></div>
          <div class="needle" id="recordNeedle"></div>
        </div>
        <div class="record-controls">
          <div id="trackTitle" class="record-title">Canci√≥n navide√±a 1</div>
          <button class="record-btn" id="prevSong">‚èÆÔ∏è</button>
          <button class="record-btn" id="nextSong">‚è≠Ô∏è</button>
        </div>
      </div>

      <h1 class="title">24 pistas misteriosas, un regalo muy nuestro</h1>

      <p class="subtitle">
        Cada d√≠a de diciembre se desbloquea una nueva ventana. Detr√°s no hay chocolate,
        sino peque√±os fragmentos de algo que estoy preparando para ti con todo mi cari√±o.
      </p>

      <p class="subtitle-2">
        Aunque leas las 24 pistas, prometo que no adivinar√°s exactamente qu√© es‚Ä¶ pero quiz√° s√≠
        empieces a intuir cu√°nto significa para m√≠ compartirlo contigo.
      </p>

      <div class="warning">
        <span>‚ö†Ô∏è</span>
        <span>
          Solo puedes abrir el d√≠a correspondiente. Sin trampas... los mejores misterios se saborean
          con paciencia, igual que las cosas bonitas que se construyen poco a poco.
        </span>
      </div>

      <div class="progress-wrapper" aria-live="polite">
        <div class="progress-label-row">
          <span><strong id="progressText">Has descubierto 0 de 24 pistas</strong></span>
          <span class="progress-heart">üíó</span>
        </div>
        <div class="progress-bar" aria-hidden="true">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="layout">
        <section class="calendar-card" aria-label="Calendario diciembre" aria-describedby="calendarHelp">
          <div class="calendar-title">
            <span>üìÖ</span> Diciembre 2025 ¬∑ D√≠as 1 al 24
          </div>
          <p class="calendar-sub" id="calendarHelp">
            Toca cualquier casilla desbloqueada para descubrir la pista del d√≠a.
            Cada una te acercar√° un poco m√°s al misterio... pero sin desvelarlo del todo.
          </p>
          <div class="days-grid" id="daysGrid" role="grid"></div>
        </section>

        <section class="clue-card" aria-label="Pista revelada">
          <div class="clue-title">
            <span>üîç</span> Pista del d√≠a
          </div>
          <div class="clue-inner">
            <div id="clueContent">
              <p class="clue-placeholder">
                Selecciona una casilla del calendario para descubrir tu pista de hoy.
                <br><br>
                üí≠ Peque√±o secreto: ninguna pista por s√≠ sola tiene sentido completo,
                y todas juntas tampoco te dejar√°n adivinarlo del todo.
                Ah√≠ est√° precisamente la gracia del misterio‚Ä¶ y de nosotros. üòä‚ú®
              </p>
            </div>
            <div class="clue-footer">
              <span class="hint-emoji">üí°</span>
              <span>
                <strong>Pista maestra:</strong> No es algo que puedas guardar en una estanter√≠a,
                pero s√≠ quedar√° guardado en tu coraz√≥n para siempre. Y pase lo que pase,
                lo viviremos juntos, porque as√≠ es como tiene sentido.
              </span>
            </div>
            <div class="end-message" id="endMessage">
              <span class="end-heart">üíû</span>
              <span>
                Has descubierto las 24 pistas. El misterio ya casi est√° listo‚Ä¶
                solo falta una √∫ltima cosa: que digas que s√≠ cuando te lo pida.
              </span>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <script>
    // ‚Äî‚Äî CONFIGURACI√ìN ‚Äî‚Äî
    const DEBUG_UNLOCK_ALL = true; // Pon a true para poder abrir todos los d√≠as al probar
    const ADVENT_YEAR = 2025;       // Cambia el a√±o si quieres reutilizar el calendario

    const clues = [
      "Es algo que llevas tiempo buscando.",
      "Es algo que que en su concepto siempre has querido y seguiras queriendo.",
      "Es algo que en ocasiones cuesta encontrar.",
      "Es algo que no se compra en tiendas normales.",
      "Es algo que con el tiempo no se puede desgastar.",
      "Es algo que vas a poder ver.",
      "Es algo que vas a poder tocar.",
      "Es algo que se puede oler.",
      "Es algo si supieses lo que es, lo querrias ya mismo.",
      "Es algo que no cabe en Amazon. Y aun as√≠ llega a tiempo.",
      "Es algo que es complicado de envolver.",
      "Es algo que requiere paciencia y calma.",
      "Es algo que hay que echarle ganas.",
      "Es algo que no vas encontrar dos iguales.",
      "Es algo que, si est√°s de mal humor, te lo cambia.",
      "Es algo que no vas a usar todos los d√≠as.",
      "Es algo que funciona mejor si lo compartes.",
      "Es algo que te va a sorprender.",
      "Es algo que a veces aparece cuando m√°s lo necesitas.",
      "Es algo que a veces no sabes que necesitas hasta que lo tienes delante.",
      "Es algo que no se come ni se bebe, pero alimenta mucho.",
      "Es algo que depende de m√°s cosas de las que parece.",
      "Es algo que podr√≠as haber imaginado‚Ä¶ o no.",
      "Es algo que si sigues sin adivinar, no te culpo: est√° pensado para eso."
    ];

    const daysGrid = document.getElementById("daysGrid");
    const clueContent = document.getElementById("clueContent");
    const progressText = document.getElementById("progressText");
    const progressFill = document.getElementById("progressFill");
    const endMessage = document.getElementById("endMessage");
    const musicToggle = document.getElementById("musicToggle");
    const musicLabel = document.getElementById("musicLabel");
    const bgMusic = document.getElementById("bgMusic");

    let openedDays = new Set();
    const saved = JSON.parse(localStorage.getItem("openedDays") || "[]");
    openedDays = new Set(saved);

    let lastConfettiTime = 0;

    // ‚Äî‚Äî Estrellas ‚Äî‚Äî
    (function createStars() {
      const starsContainer = document.getElementById('stars');
      const totalStars = 90;
      for (let i = 0; i < totalStars; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        const size = Math.random() * 2.5 + 0.8;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.animationDelay = Math.random() * 3 + 's';
        star.style.animationDuration = Math.random() * 3 + 2 + 's';
        starsContainer.appendChild(star);
      }
    })();

    // ‚Äî‚Äî Nieve ‚Äî‚Äî
    (function createSnow() {
      const snowContainer = document.getElementById('snowContainer');
      const snowflakes = ['‚ùÑ', '‚ùÖ', '‚ùÜ'];
      const totalSnow = 28;
      for (let i = 0; i < totalSnow; i++) {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';
        snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
        snowflake.style.left = Math.random() * 100 + '%';
        snowflake.style.animationDuration = Math.random() * 10 + 10 + 's';
        snowflake.style.animationDelay = Math.random() * 10 + 's';
        snowflake.style.fontSize = (Math.random() * 0.5 + 0.5) + 'em';
        snowContainer.appendChild(snowflake);
      }
    })();

    // ‚Äî‚Äî Part√≠culas de luz ‚Äî‚Äî
    (function createLightParticles() {
      const lightParticlesContainer = document.getElementById('lightParticles');
      const total = 14;
      for (let i = 0; i < total; i++) {
        const particle = document.createElement('div');
        particle.className = 'light-particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 8 + 's';
        particle.style.animationDuration = Math.random() * 4 + 6 + 's';
        lightParticlesContainer.appendChild(particle);
      }
    })();

    function createConfetti(x, y) {
      const now = Date.now();
      const MIN_DELAY = 600; // milisegundos
      if (now - lastConfettiTime < MIN_DELAY) return;
      lastConfettiTime = now;

      const colors = ['#ff6b9d', '#fbbf24', '#5eead4', '#c084fc', '#fca5a5'];
      const total = 20;

      for (let i = 0; i < total; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = x + 'px';
        confetti.style.top = y + 'px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        confetti.style.animationDelay = Math.random() * 0.3 + 's';
        confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 3200);
      }
    }

    function isDayUnlocked(day) {
      if (DEBUG_UNLOCK_ALL) return true;
      const today = new Date();

      // Permitir siempre fuera del a√±o configurado si quieres reutilizarlo como demo.
      if (today.getFullYear() !== ADVENT_YEAR) {
        return true;
      }

      const month = today.getMonth(); // 0-based, 11 = diciembre
      const currentDay = today.getDate();

      return month === 11 && currentDay >= day;
    }

    function updateProgress() {
      const totalDays = 24;
      const openedCount = openedDays.size;
      const percentage = openedCount / totalDays;
      progressText.textContent = `Has descubierto ${openedCount} de ${totalDays} pistas`;
      progressFill.style.transform = `scaleX(${percentage})`;

      if (openedCount === totalDays) {
        endMessage.classList.add('visible');
      }
    }

    function showClue(day, el) {
      const rect = el.getBoundingClientRect();
      createConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);

      if (navigator.vibrate) {
        navigator.vibrate([50, 30, 50]);
      }

      // Marcar d√≠a abierto visualmente
      const previouslyOpened = document.querySelector('.day.opened');
      if (previouslyOpened) {
        previouslyOpened.classList.remove('opened');
      }
      el.classList.add('opened');

      openedDays.add(day);
      localStorage.setItem("openedDays", JSON.stringify([...openedDays]));
      updateProgress();

      // Contenido de la pista
      const text = clues[day - 1] || "Ups, parece que esta pista se ha perdido en la magia navide√±a... üéÑ";

      const wrapper = document.createElement('div');

      const meta = document.createElement('p');
      meta.className = 'clue-meta';
      meta.innerHTML = `Pista del d√≠a <span>${day}</span> ¬∑ Progreso: ${openedDays.size}/24 pistas descubiertas`;

      const p = document.createElement('p');
      p.className = 'clue-text';
      p.textContent = text;

      wrapper.appendChild(meta);
      wrapper.appendChild(p);

      // Bot√≥n final para la invitaci√≥n
      // D√≠a 24: l√≥gica especial del regalo final
if (day === 24) {
  const today = new Date();

  const is25December =
    today.getMonth() === 11 && today.getDate() === 25;

  const hasAllDays =
    openedDays.size === 24; // ¬øSe han completado todos los d√≠as?

  if (is25December && hasAllDays) {
    // ‚≠ê EL REGALO SE DESBLOQUEA EL 25 DE DICIEMBRE Y CON LOS 24 D√çAS COMPLETOS
    const finalBtn = document.createElement('button');
    finalBtn.textContent = '‚ú® Descubrir mi regalo final';
    finalBtn.className = 'final-button';
    finalBtn.onclick = () => {
      window.location.href = 'invitacion/index.html';
    };
    wrapper.appendChild(finalBtn);

  } else {
    // ‚≠ê MENSAJES DE ESPERA O D√çAS INCOMPLETOS
    const msg = document.createElement('p');
    msg.style.marginTop = "12px";
    msg.style.fontSize = "0.9rem";
    msg.style.color = "#fef3c7";
    msg.style.opacity = "0.85";
    msg.style.textAlign = "center";

    if (!hasAllDays) {
      // No ha completado los 24 d√≠as
      msg.innerHTML =
        "üéÅ Este regalo solo aparece cuando descubras las 24 pistas.<br>" +
        "Sigue abriendo casillas‚Ä¶ cada d√≠a te acerca un poco m√°s. ‚ú®";
    } else {
      // Ha completado los 24 d√≠as pero NO es 25
      msg.innerHTML =
        "üéÑ Ya has completado los 24 d√≠as‚Ä¶<br>" +
        "pero el regalo aparecer√° ma√±ana, 25 de diciembre. ‚ù§Ô∏è";
    }

    wrapper.appendChild(msg);
  }
}


      clueContent.innerHTML = '';
      clueContent.appendChild(wrapper);

      setTimeout(() => {
        p.classList.add('visible');
      }, 40);

      if (window.innerWidth < 900) {
        setTimeout(() => {
          document.querySelector('.clue-card').scrollIntoView({
            behavior: 'smooth',
            block: 'nearest'
          });
        }, 120);
      }
    }

    function createCalendar() {
  for (let day = 1; day <= 24; day++) {
    const btn = document.createElement('button');
    btn.className = 'day';
    btn.type = 'button';
    btn.dataset.day = String(day);
    btn.innerHTML = `<span>${day}</span>`;
    btn.setAttribute('role', 'button');

    const unlocked = isDayUnlocked(day);

    if (unlocked) {
      btn.classList.add('unlocked');
      btn.setAttribute('aria-label', `D√≠a ${day}: disponible`);
      btn.setAttribute('aria-disabled', 'false');
    } else {
      btn.classList.add('locked');
      btn.setAttribute('aria-label', `D√≠a ${day}: a√∫n no disponible`);
      btn.setAttribute('aria-disabled', 'true');
    }

    // ‚úÖ Marcar como "opened" si estaba guardado en localStorage
    if (openedDays.has(day)) {
      btn.classList.add('opened');
    }

    daysGrid.appendChild(btn);
  }
}


    // Delegaci√≥n de eventos para el calendario
    daysGrid.addEventListener('click', (event) => {
      const target = event.target;
      const btn = target.closest('.day');
      if (!btn || !daysGrid.contains(btn)) return;

      const day = Number(btn.dataset.day);
      if (!Number.isInteger(day) || !btn.classList.contains('unlocked')) return;

      showClue(day, btn);
    });


let currentTrack = 0;

function loadTrack(i) {
  currentTrack = i;
  bgMusic.src = playlist[i].file;
  document.getElementById("trackTitle").textContent = playlist[i].title;

  bgMusic.play().catch(() => {});
}

// Botones
const prevBtn = document.getElementById("prevSong");
const nextBtn = document.getElementById("nextSong");

prevBtn.addEventListener("click", () => {
  currentTrack = (currentTrack - 1 + playlist.length) % playlist.length;
  loadTrack(currentTrack);
});

nextBtn.addEventListener("click", () => {
  currentTrack = (currentTrack + 1) % playlist.length;
  loadTrack(currentTrack);
});

// Cuando termina una canci√≥n
bgMusic.addEventListener("ended", () => {
  currentTrack = (currentTrack + 1) % playlist.length;
  loadTrack(currentTrack);
});

// M√∫sica de fondo
    musicToggle.addEventListener('click', async () => {
      const isActive = musicToggle.classList.contains('active');

      if (isActive) {
        musicToggle.classList.remove('active');
        musicToggle.setAttribute('aria-pressed', 'false');
        musicLabel.textContent = 'Activar m√∫sica suave';
        bgMusic.pause();
        return;
      }

      musicToggle.classList.add('active');
      musicToggle.setAttribute('aria-pressed', 'true');
      musicLabel.textContent = 'Pausar m√∫sica';

      try {
        await bgMusic.play();
      } catch (err) {
        // Si el navegador bloquea el autoplay
        musicToggle.classList.remove('active');
        musicToggle.setAttribute('aria-pressed', 'false');
        musicLabel.textContent = 'Activar m√∫sica suave';
      }
    });

    // Inicializar calendario y progreso
    createCalendar();
    updateProgress();
  </script>
</body>
</html>
